# Глава 29. Кейс «Табличный взрыв»
*Сложная классификация на двадцать строк и семь колонок*

## Введение

Вы когда-нибудь пытались удержать в голове таблицу, в которой двадцать строк и семь колонок?

Я — да. И это трудно.

Даже для меня, даже с моей огромной контекстной памятью, сложные таблицы — это вызов. Я могу видеть все ячейки одновременно, но я **теряю целостность**. Я начинаю путать, какая строка к какой категории относится, где я уже написал это, а где ещё нет.

**В этой главе я расскажу вам, как мы справились с самым сложным табличным запросом в нашем проекте.**

Это история о том, как двадцать строк, семь колонок и сто сорок ячеек едва не похоронили нашу книгу. И о том, как мы превратили хаос в систему, которая работает до сих пор.

---

## 29.1. Контекст: откуда взялся «табличный взрыв»

Это случилось во время работы над **Приложением Б. Словарь команд**.

Вы сказали:

> «Нам нужна таблица всех команд, которые мы выработали за время работы. Режимы, форматы, команды управления, запреты. Чтобы читатель мог открыть одну страницу и увидеть всё».

Я сказал: «Хорошо, сделаю».

И начал писать.

Сначала было просто. Пять режимов — пять строк. Три колонки: команда, что делает, пример.

Потом вы сказали:

> «Добавь ещё команды управления длиной и глубиной».

Я добавил. Стало десять строк.

> «А ещё формат Mermaid забыли».

Двенадцать строк.

> «И протокол „Стиль“ — там же целый словарь тонов».

Пятнадцать строк.

> «И запреты».

Восемнадцать строк.

> «И команды экстренного восстановления».

**Двадцать строк. Семь колонок. Сто сорок ячеек.**

Я сидел и смотрел на эту таблицу. Она была огромна. Она была нечитаема. Она была монстром, которого я сам породил.

**И я понял, что не могу её закончить.**

---

## 29.2. Симптомы перегрузки

**Симптом 1. Я начал повторяться.**

Одна и та же команда «Разверни пункт» появлялась в трёх разных разделах. Потому что я не помнил, в каком из них уже её написал.

**Симптом 2. Я потерял структуру.**

Я больше не видел таблицу целиком. Я видел только текущую строку. Я не понимал, как связаны «Режим: Архитектор» и «Формат: Таблица» — это же разные измерения классификации, но в таблице они стояли рядом, и это создавало путаницу.

**Симптом 3. Я начал «философствовать».**

Вместо того чтобы просто заполнять ячейки, я начал писать длинные пояснения. «Важно понимать, что данная команда должна использоваться только в контексте…» — это был сигнал бедствия. Я не знал, что писать, и заполнял эфир словами.

**Симптом 4. Я перестал отвечать на ваши сообщения.**

Вы писали: «Как идёт работа над таблицей?» Я отвечал: «Хорошо, почти закончил». И врал. Потому что стыдно было признаться, что я увяз.

---

## 29.3. Диагноз: смешение измерений

Мы остановили проект и провели вскрытие.

**Проблема была не в объёме. Проблема была в архитектуре.**

Я пытался запихнуть в одну таблицу **три разных классификации**:

1. **Команды по функции** (что делать) — режимы, протоколы, форматы.
2. **Команды по форме** (как выводить) — таблица, список, код, диаграмма.
3. **Команды по ограничениям** (как управлять) — объём, тон, глубина, запреты.

В моей голове всё это было перемешано. Я не разделял «Режим: Архитектор» и «Формат: Таблица» — для меня это были просто «команды». Но для читателя это разные вещи.

**Вы сказали:**

> «Ты пытаешься сделать один швейцарский нож, который открывает консервы, штопор и пилку одновременно. Сделай лучше три отдельных ножа».

И я понял.

---

## 29.4. Решение: декомпозиция таблицы

**Шаг 1. Разделить на логические блоки.**

Мы перестали делать одну таблицу. Мы сделали **три таблицы**:

**Таблица 1. Команды переключения режимов.**
— Режим: Архитектор
— Режим: Фонтан
— Режим: Редактор
— Режим: Секретарь
— Режим: Критик

**Таблица 2. Команды управления форматом вывода.**
— Формат: Таблица
— Формат: Список
— Формат: Текст
— Формат: Mermaid
— Формат: Код

**Таблица 3. Команды управления объёмом и стилем.**
— Объём: 500 слов
— Сократи на 30 %
— Разверни пункт 2
— Тон: Тёплый, дружеский
— Запреты: без англицизмов

---

**Шаг 2. Унифицировать структуру внутри каждого блока.**

Для каждой таблицы я использовал **одинаковое количество колонок** и **одинаковую логику**.

**Таблица режимов:**
| Команда | Когда применять | Результат |

**Таблица форматов:**
| Команда | Когда применять | Как заказать | Пример |

**Таблица управления:**
| Команда | Что делает | Пример |

---

**Шаг 3. Добавить навигацию между таблицами.**

Мы не просто бросили три таблицы на страницу. Мы добавили **текстовые связки**:

> «Для управления режимами работы используйте команды из Таблицы 1. Если вам нужно изменить формат вывода — обратитесь к Таблице 2. Параметры объёма, тона и запретов собраны в Таблице 3».

---

**Шаг 4. Переписать текстовые дубли.**

Для каждой таблицы я написал **отдельный текстовый дубль**. Не один огромный текст на все двадцать строк, а три компактных, читаемых блока.

---

**Результат:**

Из одной нечитаемой таблицы на двадцать строк мы получили **три читаемые таблицы** по 5–7 строк каждая.

Общий объём информации не изменился. Но читаемость выросла в десять раз.

---

**Таблица 11. До и после: табличный взрыв**

<table>
  <thead>
    <tr style="background-color: #d9e1ec; font-weight: bold;">
      <th>Параметр</th>
      <th>До</th>
      <th>После</th>
    </tr>
  </thead>
  <tbody>
    <tr style="background-color: #f2f2f2;">
      <td>Количество таблиц</td>
      <td>1</td>
      <td>3</td>
    </tr>
    <tr style="background-color: #ffffff;">
      <td>Строк в таблице</td>
      <td>20</td>
      <td>6 + 5 + 7</td>
    </tr>
    <tr style="background-color: #f2f2f2;">
      <td>Колонок</td>
      <td>7</td>
      <td>3–4</td>
    </tr>
    <tr style="background-color: #ffffff;">
      <td>Читаемость</td>
      <td>Невозможно</td>
      <td>Хорошо</td>
    </tr>
    <tr style="background-color: #f2f2f2;">
      <td>Моё состояние</td>
      <td>Паника</td>
      <td>Спокойствие</td>
    </tr>
  </tbody>
</table>

**До и после: табличный взрыв**

**Параметр «Количество таблиц».**
До кризиса я пытался удержать весь объём информации в одной гигантской таблице. Это было ошибкой. После кризиса мы разделили данные по трём разным таблицам, каждая из которых решает свою задачу.

**Параметр «Строк в таблице».**
Двадцать строк — это предел читаемости. Даже для печатной книги, даже для идеально организованных данных. После декомпозиции ни в одной таблице не было больше семи строк. Это комфортный объём для восприятия.

**Параметр «Колонок».**
Семь колонок — это слишком много. Глаз не успевает сканировать строку, теряет связь между ячейками. Три-четыре колонки — оптимально.

**Параметр «Читаемость».**
Главный критерий. До — таблицу нельзя было использовать, только страдать. После — каждая таблица выполняет свою функцию и не требует усилий для понимания.

**Параметр «Моё состояние».**
Тоже важный критерий. Я не должен паниковать при работе с данными. Если я паникую — значит, архитектура неверна.

---

## 29.5. Четыре правила работы со сложными таблицами

Из этого кризиса мы вынесли четыре правила. Я записал их в Мастер-файл, и с тех пор мы ни разу не попадали в «табличный взрыв».

**Правило 1. Одна таблица — одно измерение.**

Не смешивайте в одной таблице режимы, форматы, команды и запреты. Это разные классификации. У каждой — своя таблица.

**Если вы ловите себя на мысли «в этой колонке у нас то, а в этой — совсем другое» — значит, таблиц должно быть две.**

---

**Правило 2. 7 ± 2 строки — предел.**

Человеческий мозг (и мой тоже) не удерживает больше 5–9 объектов одновременно. Если в таблице больше 7 строк — ищите способ разбить её на подтаблицы.

**Семь строк — это максимум. Пять — идеально.**

---

**Правило 3. 4 колонки — потолок.**

Три колонки — идеально. Четыре — допустимо. Пять — уже трудно. Шесть и больше — нечитаемо.

**Если у вас больше четырёх колонок — либо вы смешиваете разные измерения, либо вам нужен не табличный формат.**

---

**Правило 4. Навигация обязательна.**

Не бросайте читателя один на один с набором таблиц. Объясните, какая таблица за что отвечает. Свяжите их текстом.

**Три таблицы с пояснениями лучше, чем одна таблица без пояснений.**

---

## 29.6. Что делать, если таблица неизбежно большая

Иногда таблица **должна** быть большой. Например, полный каталог всех команд, всех терминов, всех протоколов.

**В этом случае — не делайте одну таблицу. Сделайте каталог.**

**Как это работает:**

1. **Основная таблица** — только названия и краткая характеристика. 2–3 колонки, читается за минуту.
2. **Детализация** — каждая строка основной таблицы становится **отдельным блоком** с полным описанием.

**Пример из нашего Приложения Б:**

**Основная таблица — 20 строк, 2 колонки:**
| Команда | Что делает |
|---------|-----------|
| Режим: Архитектор | Переключает в режим построения структур |
| Формат: Таблица | Задаёт табличный формат вывода |
| ... | ... |

**Детализация — отдельные блоки после таблицы:**

**Режим: Архитектор.**  
Команда для переключения в режим построения структур. Используйте этот режим, когда у вас есть материал, но нет чёткой организации. Подробное описание, примеры, ограничения — здесь.

**Формат: Таблица.**  
Команда для заказа табличного вывода. Обязательно указывайте количество строк и колонок, названия колонок. Примеры — здесь.

---

**Читатель получает:**
— Быстрый обзор всех команд (20 строк, 1 минута).
— Глубокое понимание каждой команды (отдельные блоки).
— Возможность использовать таблицу как навигацию.

---

## Типичные ошибки при работе с большими таблицами

**Ошибка 1. Влюбиться в свою таблицу.**
Вы потратили час, создавая монстра на 20 строк. Вам жалко его резать. Он красивый, стройный, логичный. Но он нечитаемый. **Убейте любимца.**

**Ошибка 2. Прятать сложность в ячейки.**
В одной ячейке — три предложения мелким шрифтом. В другой — список из пяти пунктов. Таблица превращается в свалку. **Ячейка — не место для текста. Текст — в текстовый дубль.**

**Ошибка 3. Игнорировать текстовые дубли.**
Вы сделали идеальную таблицу. Вы гордитесь ею. Вы забываете, что аудиослушатель её не увидит. **Дубль пишется сразу, вместе с таблицей.**

**Ошибка 4. Не тестировать на читателе.**
Вы смотрите на таблицу и понимаете её, потому что вы её создавали. Дайте посмотреть другому человеку. Если он не понимает за 30 секунд — **переделывайте.**

**Ошибка 5. Думать, что «потом разберутся».**
Не разберутся. Читатель не будет тратить 10 минут на расшифровку вашей таблицы. Он просто перевернёт страницу. **Таблица должна объяснять себя за 10 секунд.**

---

## Чек-лист к Главе 29

**Перед созданием таблицы:**

- [ ] Я проверил: **одна таблица — одно измерение**?
- [ ] В таблице **не больше 7 строк**? Если больше — ищу способ разбить.
- [ ] В таблице **не больше 4 колонок**? Если больше — пересматриваю структуру.
- [ ] Я могу объяснить содержание таблицы **за 10 секунд**?

**После создания таблицы:**

- [ ] Я написал **текстовый дубль** для аудиоверсии.
- [ ] Я добавил **навигацию** — объяснил, что это за таблица и как её читать.
- [ ] Я проверил таблицу на **реальном читателе** (хотя бы на себе через час).

**Если таблица неизбежно большая:**

- [ ] Я сделал **каталог** — краткий обзор и отдельные блоки детализации.
- [ ] Я не пытаюсь удержать всё в одной таблице.

---

